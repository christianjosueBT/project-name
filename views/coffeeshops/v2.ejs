<%- include('../partials/header', {title: 'Coffee Shops', stylesheet: "/stylesheets/coffeeShops.css"}) %>
<%- include('../partials/navbar', {nav: 'nav'}) %>
<!-- SEARCH BAR AND GRID LAYOUT BUTTON -->
<div class="container">
    <div class="widgetBar">
    <!-- search input -->
        <div class="searchbar basis-80">
            <label for="searchbar__input" class="searchbar__wrapper">
                <svg class="searchbar__wrapper__icon" xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 512.005 512.005">
                    <path d="M505.749,475.587l-145.6-145.6c28.203-34.837,45.184-79.104,45.184-127.317c0-111.744-90.923-202.667-202.667-202.667
                    S0,90.925,0,202.669s90.923,202.667,202.667,202.667c48.213,0,92.48-16.981,127.317-45.184l145.6,145.6
                    c4.16,4.16,9.621,6.251,15.083,6.251s10.923-2.091,15.083-6.251C514.091,497.411,514.091,483.928,505.749,475.587z
                    M202.667,362.669c-88.235,0-160-71.765-160-160s71.765-160,160-160s160,71.765,160,160S290.901,362.669,202.667,362.669z"/>
                </svg>
            </label>
            <form class="searchbar__input" action="/coffeeShops" method="GET">
                <input class="searchbar__input__text" type="search" name="search" placeholder="Search for Restaurants">
            </form>
        </div>
        <!-- button to change the grid layout -->
        <div class="dropdown dropdown--svg justify-end">
            <button class="dropdown__toggle"><svg><use href="#masonry""></use></svg></button>
            <div class="dropdown__drawer">
                <ul class="menu menu--svg">
                    <li id="masonry-grid"><svg><use href="#masonry"></use></svg><p>Masonry</p></li>
                    <li id="large-grid"><svg><use href="#grid-large"></use></svg><p>Large</p></li>
                    <li id="small-grid"><svg><use href="#grid-small"></use></svg><p>Small</p></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- COFFEE SHOP CARDS -->
<div class="container container--100">
    <% coffeeShops.forEach(coffeeShop => { %>
        <div class="card card--v2">
            <div class="card__image carousel">
                <% for(let i = 0; i < coffeeShop.images.length; i++) { %>
                    <% if(i === 0) { %>
                        <a href="/coffeeShops/<%=coffeeShop._id%>">
                            <img class="active carousel__image" data-src="<%=coffeeShop.images[i].filename%>" alt="...">
                        </a>
                    <% } else { %>
                        <a href="/coffeeShops/<%=coffeeShop._id%>">
                            <img class="carousel__image" data-src="<%=coffeeShop.images[i].filename%>" alt="...">
                        </a>
                <% }} %>
                <div class="card__image__top"><h3><a href="/coffeeShops/<%=coffeeShop._id%>"><%=coffeeShop.name.split(/\s+/).slice(0,4).join(' ')%></a></h3></div>
                <div class="card__image__bottom"><p><%=coffeeShop.description.slice(0,50)%>...</p></div>
                <svg class="button--svg button--left hide"><use href="#svg--left"></use></svg>
                <svg class="button--svg button--right hide"><use href="#svg--right"></use></svg>
            </div>
        </div>
    <% }) %>
    <footer>
        <p>The Footer. &copy; 2019 Turkey Stuff Inc.</p>
    </footer>
</div>


<!-- SVGs  -->
<!-- layouts -->
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px">
    <symbol id="grid-large" viewBox="0 0 64 80">
        <rect x="33" y="33" width="31" height="31"/>
        <rect x="33" width="31" height="31"/>
        <rect width="31" height="31"/>
        <rect y="33" width="31" height="31"/>
    </symbol>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px">
    <symbol id="grid-small" viewBox="0 0 64 80">
        <g>
            <rect y="22.875" width="20.125" height="18.25"/>
            <rect x="22.125" y="22.875" width="19.75" height="18.25"/>
            <rect x="22.125" width="19.75" height="20.875"/>
            <rect x="43.875" width="20.125" height="20.875"/>
            <rect x="22.125" y="43.125" width="19.75" height="20.875"/>
            <rect x="43.875" y="22.875" width="20.125" height="18.25"/>
            <rect y="43.125" width="20.125" height="20.875"/>
            <rect x="43.875" y="43.125" width="20.125" height="20.875"/>
            <rect width="20.125" height="20.875"/>
        </g>
    </symbol>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px">
    <symbol id="masonry" viewBox="0 0 64 80">
        <rect x="22.667" y="44.125" width="18.667" height="19.875"/>
        <polygon
            points="22.667,0 22.667,24.958 22.667,26.958 22.667,42.125 41.334,42.125 41.334,20.667 41.334,18.667 41.334,0"/>
        <rect x="43.334" width="20.666" height="18.667"/>
        <polygon points="43.334,20.667 43.334,42.125 43.334,44.125 43.334,64 64,64 64,20.667"/>
        <polygon points="20.667,44.125 20.667,42.125 20.667,26.958 0,26.958 0,64 20.667,64"/>
        <rect width="20.667" height="24.958"/>
    </symbol>
</svg>
<!-- image buttons -->
<!-- <circle cx="20" cy="20" r="20" fill="#aaa5" stroke="none"/> -->
<svg xmlns="http://www.w3.org/2000/svg">    
    <symbol id="svg--left" viewBox="0 0 40 40">
        <path d="M 25,10 L 15,20 L 25,30" fill="none" stroke-width="2px"></path>
    </symbol>
</svg>
<svg xmlns="http://www.w3.org/2000/svg">
    <symbol id="svg--right" viewBox="0 0 40 40">
        <path d="M 15,10 L 25,20 L 15,30" fill="none" stroke-width="2px"></path>
    </symbol>
</svg>
<!-- JAVASCRIPT -->
<script src="/javascripts/v2.js"></script>
</body>
</html>